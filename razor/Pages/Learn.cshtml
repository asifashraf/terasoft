@page
@model LearnModel
@inject IWebHostEnvironment env
@{
    var logDir = Environment.GetEnvironmentVariable("LOGS_DIR");
    Appl.getLogger().Information("logDir: " + logDir);
    string fileName = "extras/learn/aspnet/01-intro.md"; // Relative file path from the ASP.NET project root
    var webRoot = env.WebRootPath;
    // Read Markdown content from file
    string filePath = System.IO.Path.Combine(webRoot, fileName);
    string markdownContent = System.IO.File.ReadAllText(filePath);

    // Render Markdown to HTML using Markdig
    var pipeline = new Markdig.MarkdownPipelineBuilder().Build();
    string htmlContent = Markdig.Markdown.ToHtml(markdownContent, pipeline);

}

<div class="container">
    <h1>@Model.Title </h1>
    <p>@Model.Message</p>
    <div>@Html.Raw(htmlContent)</div>
</div>



@functions {
    public class LearnModel : PageModel
    {
        private readonly ILogger<LearnModel> _logger;

        public LearnModel(ILogger<LearnModel> logger)
        {
            _logger = logger;
        }
        public string? Title { get; set; }
        public string? Message { get; set; }

        public void OnGet()
        {
            Title = "My Razor Page";
            Message = "Hello from the model class!";
            _logger.LogInformation("Hello, world!"); // Log the "Hello, world!" message

        }
    }
}

@section inHead {
    <link rel="stylesheet" href="~/css/content-page.css" />
    <link rel="stylesheet" href="~/css/chat-markdown-page.css" />
}

